# Как генерируется ответ учителя

```
  Вся история диалога
         │
  Системный промпт учителя
         │
         ▼
      Вызов LLM ──→ ответ + рассуждения модели
         │
         ▼
  Есть метка [SOLVED]? ──→ Да → сессия завершена
         │
         Нет
         ▼
  Показать в чате
```

**Один вызов. Один промпт. Никаких интентов.**

## Системный промпт

Единственный промпт задаёт всё поведение учителя:

- **Роль** — AI-тьютор для школьников, метод Сократа (вопросами, не ответами)
- **Путь A** — ученик пришёл с темой ("объясни дроби") → план обучения → цикл: теория + вопрос → финальное задание → конспект
- **Путь B** — ученик пришёл с задачей ("реши 2x+5=13") → фиксация условия → план решения → ведение по шагам → обобщение
- **Работа с ошибками** — не говорить "неправильно", а спросить "какое правило здесь?" → дать применить → только потом помочь
- **[SOLVED]** — метка в конце ответа когда задача полностью решена, система автоматически завершает сессию

## Настройки из сайдбара

- **Модель** — Gemini 3 Flash (с thinking) или GPT OSS 120B (с reasoning)
- **Thinking / Reasoning level** — глубина размышлений модели перед ответом
- **Temperature** — 0 = предсказуемо, 2 = креативно
- **Max tokens** — лимит длины ответа
